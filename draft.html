---
layout: containerless
title: Markdown Editor
excerpt: A local storage Markdown editor for writing.
---

<link rel="stylesheet" href="https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.css">
<script src="https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.js"></script>

<script type="text/javascript">
  document.addEventListener('DOMContentLoaded', function() {
    var simplemde = new SimpleMDE({ 
      element: document.getElementById("editor"),
      autofocus: true,
      autosave: {
        enabled: true,
        uniqueId: 'draft-editor',
      },
      initialValue: '# Title',
      toolbar: false,
    });
    var preview = document.getElementById('preview');

    var codemirror = simplemde.codemirror;
    // Get a live preview without needing a toolbar button. Also throttle the updates
    // to not get flickers when a draft gets longer.
    var COMMIT_THROTTLE_DURATION_MS = 500;
    var lastUncommittedValue = simplemde.options.previewRender(simplemde.value(), preview);
    var lastCommit = performance.now() - COMMIT_THROTTLE_DURATION_MS;
    window.setInterval(
      function() {
        preview.innerHTML = lastUncommittedValue;
      },
      1000);
    var sideBySideRenderingFunction = function() {
      var now = performance.now();
      if ((now - lastCommit) > COMMIT_THROTTLE_DURATION_MS) {
        lastCommit = now;
        lastUncommittedValue = simplemde.options.previewRender(simplemde.value(), preview);
      }
    };
    codemirror.on("update", sideBySideRenderingFunction);
  });
</script>

<div class="row">
  <div class="col-xs">
    <textarea id="editor"></textarea>
  </div>
  <div class="col-xs" id="preview">
  </div>
</div>